<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Business CRM Suite</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/assets/css/vendra-theme.css" rel="stylesheet">
    <link href="/assets/css/dashboard.css" rel="stylesheet">
    <link href="/assets/css/mobile.css" rel="stylesheet">
</head>
<body>
    <!-- Vendra Navbar Component -->
    <div id="navbar-container"></div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page-content active">
        <!-- Vendra Stats Cards -->
        <div class="row g-4 mb-4">
            <div class="col-xl-3 col-md-6">
                <div class="stats-card">
                    <div class="stats-icon" style="background: var(--vendra-gradient-primary);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stats-number" id="totalCustomers">0</div>
                    <div class="stats-label">Total Pelanggan</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> +12% dari bulan lalu
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card">
                    <div class="stats-icon" style="background: var(--vendra-gradient-accent);">
                        <i class="fas fa-rupiah-sign"></i>
                    </div>
                    <div class="stats-number" id="totalRevenue">Rp 0</div>
                    <div class="stats-label">Total Penjualan</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> +8% dari bulan lalu
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card">
                    <div class="stats-icon" style="background: linear-gradient(135deg, var(--vendra-warning) 0%, #F39C12 100%);">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stats-number" id="totalTransactions">0</div>
                    <div class="stats-label">Jumlah Transaksi</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> +15% dari bulan lalu
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card">
                    <div class="stats-icon" style="background: linear-gradient(135deg, var(--vendra-primary) 0%, var(--vendra-accent) 100%);">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stats-number" id="avgTransaction">Rp 0</div>
                    <div class="stats-label">Rata-rata Transaksi</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> +5% dari bulan lalu
                    </div>
                </div>
            </div>
        </div>

            <!-- Recent Transactions -->
            <div class="row">
                <div class="col-12">
                    <div class="vendra-card">
                        <div class="vendra-card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="mb-1 vendra-primary">Transaksi Terbaru</h5>
                                    <p class="text-muted mb-0">Data transaksi pelanggan terkini</p>
                                </div>
                                <button class="btn-vendra-outline btn-sm" id="refreshBtn">
                                    <i class="fas fa-sync-alt me-1"></i> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div class="vendra-card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover mb-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="border-0 fw-semibold">Customer</th>
                                            <th class="border-0 fw-semibold">Product</th>
                                            <th class="border-0 fw-semibold">Amount</th>
                                            <th class="border-0 fw-semibold">Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transactionsTable">
                                        <tr>
                                            <td colspan="4" class="text-center py-5">
                                                <div class="d-flex flex-column align-items-center">
                                                    <div class="spinner-border text-primary mb-3" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                    <div class="text-muted">Loading transaction data...</div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Import Data Page -->
        <div id="import-data" class="page-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h4 class="mb-1">Import Customer Data</h4>
                    <p class="text-muted mb-0">Upload CSV file to import customer transaction data</p>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-lg-8">
                    <div class="content-card">
                        <h6 class="mb-3">Upload CSV File</h6>
                        <div class="upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <h6>Drag & drop your CSV file here</h6>
                            <p class="text-muted">or <a href="#" id="browseFile">browse to choose a file</a></p>
                            <input type="file" id="csvFile" accept=".csv" style="display: none;">
                        </div>
                        
                        <div id="uploadProgress" class="mt-3" style="display: none;">
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <small class="text-muted mt-1 d-block">Uploading...</small>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="content-card">
                        <h6 class="mb-3">CSV Format Requirements</h6>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>unique_customer_id</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>customer_name</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>customer_email</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>customer_phone</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>product_type</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>total_amount</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>transaction_date</li>
                        </ul>
                        
                        <div class="mt-3">
                            <button class="btn btn-outline-primary btn-sm w-100" id="downloadTemplate">
                                <i class="fas fa-download me-1"></i> Download Template
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Templates Page -->
        <div id="data-templates" class="page-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h4 class="mb-1">CSV Templates</h4>
                    <p class="text-muted mb-0">Download CSV templates for data import</p>
                </div>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="content-card">
                        <div class="d-flex align-items-center mb-3">
                            <div class="stats-icon me-3" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); width: 48px; height: 48px;">
                                <i class="fas fa-users"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">Customer Transactions Template</h6>
                                <small class="text-muted">Complete transaction data format</small>
                            </div>
                        </div>
                        <p class="text-muted small mb-3">Template includes all required fields for customer transaction import</p>
                        <button class="btn btn-success btn-sm" onclick="downloadCustomerTemplate()">
                            <i class="fas fa-download me-1"></i> Download Template
                        </button>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="content-card">
                        <div class="d-flex align-items-center mb-3">
                            <div class="stats-icon me-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 48px; height: 48px;">
                                <i class="fas fa-box"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">Products Template</h6>
                                <small class="text-muted">Product catalog format</small>
                            </div>
                        </div>
                        <p class="text-muted small mb-3">Template for importing product information and pricing</p>
                        <button class="btn btn-primary btn-sm" onclick="downloadProductTemplate()">
                            <i class="fas fa-download me-1"></i> Download Template
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Analytics Page -->
        <div id="ai-analytics" class="page-content">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h4 class="mb-1">AI Analytics</h4>
                    <p class="text-muted mb-0">Intelligent insights powered by AI</p>
                </div>
            </div>

            <div class="content-card">
                <div class="text-center py-5">
                    <i class="fas fa-robot fa-4x text-primary mb-3"></i>
                    <h5>AI Analytics Coming Soon</h5>
                    <p class="text-muted">Advanced AI-powered customer insights and predictive analytics will be available here.</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Vendra Footer -->
    <footer class="vendra-footer">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-muted">
                        © 2024 <strong class="vendra-primary">Vendra</strong>. 
                        Professional CRM & Analytics Platform.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="footer-links">
                        <a href="#" class="text-muted me-3">Help & Support</a>
                        <a href="#" class="text-muted me-3">Documentation</a>
                        <a href="#" class="text-muted">Contact</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/error-logger.js"></script>
    <script src="/assets/js/navbar.js"></script>
    <script src="/assets/js/sidebar.js"></script>
    <script src="/assets/js/dashboard.js"></script>
    
    <script>
        // Dashboard specific functions
        document.addEventListener('DOMContentLoaded', function() {
            // Functions to handle different sections
            window.showImportDataSection = function() {
                showToast('Import Data', 'Feature available in dashboard! You can upload CSV files here.', 'info');
            };
            
            window.showTemplatesSection = function() {
                showToast('CSV Templates', 'Feature available in dashboard! Download sample CSV templates here.', 'info');
            };
            
            window.showAIAnalyticsSection = function() {
                showToast('AI Analytics', 'Advanced AI-powered analytics and insights coming soon!', 'warning');
            };
            
            // Toast notification function
            function showToast(title, message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
                toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 350px;';
                toast.innerHTML = `
                    <strong>${title}</strong><br>
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.classList.remove('show');
                        setTimeout(() => {
                            if (toast.parentNode) {
                                toast.parentNode.removeChild(toast);
                            }
                        }, 150);
                    }
                }, 4000);
            }
            
            // Handle hash routing
            function handleHashRouting(hash) {
                switch(hash) {
                    case 'import-data':
                        window.location.href = '/import-data';
                        break;
                    case 'data-templates':
                        window.location.href = '/csv-templates';
                        break;
                    case 'ai-analytics':
                        window.location.href = '/ai-analytics';
                        break;
                    default:
                        console.log('Unknown hash:', hash);
                }
            }

            // Handle hash changes
            window.addEventListener('hashchange', function() {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    handleHashRouting(hash);
                }
            });

            // Handle initial hash on page load
            if (window.location.hash) {
                const hash = window.location.hash.substring(1);
                handleHashRouting(hash);
            }
        });
    </script>

</body>
</html>
